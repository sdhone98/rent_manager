<!DOCTYPE html>
<html lang="en" xmlns:text-align="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8">
    <title>Transaction Invoice</title>
    <style>
      @page {
        size: A4;
        margin: 20mm;
      }

      body {
        font-family: Helvetica, Arial, sans-serif;
        font-size: 12px;
        color: #333;
      }

      .invoice-box {
        max-width: 800px;
        margin: auto;
        padding: 10px;
        border: 1px solid #eee;
        border-radius: 8px;
      }

      .inner-box {
        padding: 20px;
        border: 1px dashed #bbbec4;
        border-radius: 8px;
      }

      h2 {
        margin: 0;
        font-size: 22px;
        color: #222;
      }

      p {
        margin: 4px 0;
      }

      .section {
        margin-bottom: 20px;
      }

      .section-title {
        font-size: 14px;
        font-weight: bold;
        color: #222;
        border-left: 4px solid #444;
        padding-left: 8px;
        margin-bottom: 8px;
      }

      .section-date {
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        margin-bottom: 15px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      table th {
        background: #f5f5f5;
        border: 1px solid #ddd;
        padding: 10px;
        font-size: 12px;
      }

      table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
      }

      .total-table {
        width: 40%;
        float: right;
        border-collapse: collapse;
      }

      .total-table td {
        border: 1px solid #ddd;
        padding: 10px;
      }

      .total-label {
        background: #f5f5f5;
        font-weight: bold;
      }

      .badge {
        display: inline-block;
        padding: 4px 10px;
        font-size: 11px;
         font-weight: bold;
        border-radius: 12px;
        color: #222;
      }

      .footer {
        margin-top: 40px;
        text-align: center;
        font-size: 11px;
        color: #777;
        border-top: 1px dashed #ccc;
        padding-top: 10px;
      }

      .action-btn {
        margin-top: 10px;
        background: #444;
        color: #fff;
        border: none;
        padding: 8px 14px;
        font-size: 12px;
        border-radius: 4px;
        cursor: pointer;
      }

      @media print {
        .action-btn {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="invoice-box">
      <div class="inner-box">
        <!-- HEADER -->
        <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-bottom:2px solid #444; margin-bottom:20px;">
          <tr>
            <td valign="top" align="left" style="
          text-align:left;
          border:none;
          padding:0;
        ">
              <h2>Dhone Rental Management</h2>
              <p>Nandivali, Kalyan East</p>
              <p>Maharashtra - 421306</p>
              <p>Email: {{ COMPANY_EMAIL }}</p>
            </td>
            <td valign="top" align="right" style="
          text-align:right;
          border:none;
          padding:0;
        ">
              <p>
                <b>Invoice No:</b> {{ transaction.tnx_no }}
              </p>
              <p>
                <b>Date:</b> {{ transaction.ts }}
              </p>
            </td>
          </tr>
        </table>
        <!-- MONTH -->
        <div class="section-date">
          {{ MONTH }}
        </div>
        <!-- TENANT DETAILS -->
        <div class="section">
          <div class="section-title">Tenant Details</div>
          <p>
            <b>Name:</b>
            {{ transaction.rm_map.person.f_name }}
            {{ transaction.rm_map.person.m_name }}
            {{ transaction.rm_map.person.l_name }}
          </p>
          <p>
            <b>Room:</b>
            {{ transaction.rm_map.room.r_no }} | {{ transaction.rm_map.room.flr_no }} Floor | {{ transaction.rm_map.room.build_name }}
          </p>
        </div>
        <!-- PAYMENT DETAILS -->
        <div class="section">
          <div class="section-title">Payment Details</div>
          <table>
            <thead>
              <tr>
                <th>Item</th>
                <th>Amount (₹)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td> {% if transaction.is_rent %} Monthly Rent {% else %} Other {% endif %} </td>
                <td>{{ transaction.amount }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- DESCRIPTION -->
        <div class="section">
          <table width="100%">
            <tr>
              <td>
                <b>Description:</b> {{ transaction.comment }}
              </td>
              <td align="right">
                <span class="badge">{{ transaction.payment_mode }}</span>
              </td>
            </tr>
          </table>
        </div>
        <!-- TOTAL -->
        <div class="section">
          <table class="total-table">
            <tr>
              <td class="total-label">Total Amount</td>
              <td>₹ {{ transaction.amount }}</td>
            </tr>
          </table>
          <div style="clear: both;"></div>
        </div>
        <!-- FOOTER -->
        <div class="footer">
          <p>This is a system generated invoice. No signature required.</p>
          <p>Thank you for your payment.</p>
        </div>
      </div>
    </div>
  </body>
</html>